/*
Navicat MySQL Data Transfer

Source Server         : 127.0.0.1_3306
Source Server Version : 50624
Source Host           : 127.0.0.1:3306
Source Database       : souko

Target Server Type    : MYSQL
Target Server Version : 50099
File Encoding         : 65001

Date: 2015-06-17 18:49:31
*/

SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Table structure for colors
-- ----------------------------
DROP TABLE IF EXISTS `colors`;
CREATE TABLE `colors` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`codcolor3`  varchar(3) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`codcolor6`  varchar(6) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`descolor`  varchar(45) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`usuario_id`  int(11) NOT NULL ,
`created_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
`updated_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
PRIMARY KEY (`id`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci
/*!50003 AUTO_INCREMENT=37 */

;

-- ----------------------------
-- Records of colors
-- ----------------------------
BEGIN;
INSERT INTO `colors` VALUES ('1', 'NEG', 'NEGRO', 'NEGRO', '1', '2015-05-30 22:23:14', '2015-05-30 22:23:14'), ('2', 'MAR', 'MARRON', 'MARRON', '1', '2015-05-31 00:13:48', '2015-05-31 00:14:51'), ('3', 'NM', 'NEGMAR', 'NEGRO-MARRON', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('4', 'MN', 'MARNEG', 'MARRON-NEGRO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('5', 'COB', 'COBRE', 'COBRE', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('6', 'NAT', 'NATURA', 'NATURAL', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('7', 'ACE', 'ACERO', 'ACERO', '1', '0000-00-00 00:00:00', '2015-06-11 20:32:00'), ('8', 'AFR', 'AFRICA', 'AFRICA', '1', '0000-00-00 00:00:00', '2015-06-11 20:35:18'), ('9', 'APA', 'APACHE', 'APACHE', '1', '0000-00-00 00:00:00', '2015-06-08 04:26:48'), ('10', 'ARE', 'ARENA', 'ARENA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('11', 'AZU', 'AZUL', 'AZUL', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('12', 'BLA', 'BLANCO', 'BLANCO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('13', 'CAN', 'CANELA', 'CANELA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('14', 'CAR', 'CARAME', 'CARAMELO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('15', 'CEM', 'CEMENT', 'CEMENTO', '3', '0000-00-00 00:00:00', '2015-06-08 23:04:46'), ('16', 'GRI', 'GRIS', 'GRIS', '1', '0000-00-00 00:00:00', '2015-06-09 21:32:13'), ('17', 'GUI', 'GUINDA', 'GUINDA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('18', 'HAB', 'HABANO', 'HABANO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('19', 'HUE', 'HUESO', 'HUESO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('20', 'JAM', 'JAMAIC', 'JAMAICA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('21', 'MIE', 'MIEL', 'MIEL', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('22', 'MOR', 'MORO', 'MORO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('23', 'MUS', 'MUSGO', 'MUSGO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('24', 'NUT', 'NUTRIA', 'NUTRIA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('25', 'OLI', 'OLIVO', 'OLIVO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('26', 'PAC', 'PACAE', 'PACAE', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('27', 'PAP', 'PAPA', 'PAPA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('28', 'PET', 'PETROL', 'PETROLEO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('29', 'PLA', 'PLATA', 'PLATA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('30', 'PLO', 'PLOMO', 'PLOMO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('31', 'ROJ', 'ROJO', 'ROJO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('32', 'TIE', 'TIERRA', 'TIERRA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('33', 'TOF', 'TOFFEE', 'TOFFEE', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('34', 'TUM', 'TUMBO', 'TUMBO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('35', 'VER', 'VERDE', 'VERDE', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('36', 'VIZ', 'VIZCAC', 'VIZCACHA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00');
COMMIT;

-- ----------------------------
-- Table structure for documentos
-- ----------------------------
DROP TABLE IF EXISTS `documentos`;
CREATE TABLE `documentos` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`fechadocumento`  date NOT NULL ,
`tipomovimiento_id`  int(11) NOT NULL ,
`localini_id`  int(11) NOT NULL ,
`localfin_id`  int(11) NOT NULL ,
`flagestado`  varchar(3) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`usuario_id`  int(11) NOT NULL ,
`created_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
`updated_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
PRIMARY KEY (`id`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci
/*!50003 AUTO_INCREMENT=2 */

;

-- ----------------------------
-- Records of documentos
-- ----------------------------
BEGIN;
INSERT INTO `documentos` VALUES ('1', '2015-06-10', '1', '1', '1', 'ACT', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00');
COMMIT;

-- ----------------------------
-- Table structure for estados
-- ----------------------------
DROP TABLE IF EXISTS `estados`;
CREATE TABLE `estados` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`codestado3`  varchar(3) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`codestado6`  varchar(6) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`desestado`  varchar(45) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`usuario_id`  int(11) NOT NULL ,
`created_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
`updated_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
PRIMARY KEY (`id`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci
/*!50003 AUTO_INCREMENT=5 */

;

-- ----------------------------
-- Records of estados
-- ----------------------------
BEGIN;
INSERT INTO `estados` VALUES ('1', 'ACT', 'ACTIVO', 'ACTIVO', '1', '2015-05-30 23:00:15', '2015-05-30 23:00:15'), ('2', 'INA', 'INACTI', 'INACTIVO', '1', '2015-05-30 23:40:52', '2015-05-30 23:41:18'), ('3', 'DEV', 'DEVUEL', 'DEVUELTO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('4', 'BAJ', 'BAJA', 'BAJA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00');
COMMIT;

-- ----------------------------
-- Table structure for locals
-- ----------------------------
DROP TABLE IF EXISTS `locals`;
CREATE TABLE `locals` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`codlocal3`  varchar(3) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`codlocal6`  varchar(6) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`deslocal`  varchar(45) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`usuario_id`  int(11) NOT NULL ,
`created_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
`updated_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
PRIMARY KEY (`id`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci
/*!50003 AUTO_INCREMENT=3 */

;

-- ----------------------------
-- Records of locals
-- ----------------------------
BEGIN;
INSERT INTO `locals` VALUES ('1', 'ALM', 'ALMACE', 'ALMACEN', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('2', 'P1', 'PTO1', 'PUNTO DE VENTA 1', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00');
COMMIT;

-- ----------------------------
-- Table structure for marcas
-- ----------------------------
DROP TABLE IF EXISTS `marcas`;
CREATE TABLE `marcas` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`codmarca3`  varchar(3) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`codmarca6`  varchar(6) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`desmarca`  varchar(45) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`usuario_id`  int(11) NOT NULL ,
`created_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
`updated_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
PRIMARY KEY (`id`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci
/*!50003 AUTO_INCREMENT=12 */

;

-- ----------------------------
-- Records of marcas
-- ----------------------------
BEGIN;
INSERT INTO `marcas` VALUES ('1', 'AND', 'ANDERS', 'ANDERSON', '1', '2015-05-31 02:01:41', '2015-05-31 02:01:41'), ('2', 'BOA', 'BOAZ', 'BOAZ', '1', '2015-05-31 02:01:58', '2015-05-31 02:01:58'), ('3', 'AVE', 'AVENTU', 'AVENTURERO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('4', 'BRA', 'BRASIL', 'BRASILIA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('5', 'CZB', 'CALZ-B', 'CALZADO B', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('6', 'DAM', 'DAMBER', 'DAMBER', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('7', 'DRA', 'DRAGON', 'DRAGON', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('8', 'EB', 'EB', 'EB', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('9', 'EMB', 'EMBAJA', 'EMBAJADOR', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('10', 'KEN', 'KENSA', 'KENSA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('11', 'PRI', 'PRINCE', 'PRINCE', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00');
COMMIT;

-- ----------------------------
-- Table structure for materials
-- ----------------------------
DROP TABLE IF EXISTS `materials`;
CREATE TABLE `materials` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`codmaterial3`  varchar(3) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`codmaterial6`  varchar(6) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`desmaterial`  varchar(45) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`usuario_id`  int(11) NOT NULL ,
`created_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
`updated_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
PRIMARY KEY (`id`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci
/*!50003 AUTO_INCREMENT=7 */

;

-- ----------------------------
-- Records of materials
-- ----------------------------
BEGIN;
INSERT INTO `materials` VALUES ('1', 'CRA', 'CRACK', 'CRACK', '1', '2015-06-02 22:56:25', '2015-06-02 22:56:25'), ('2', 'CUE', 'CUERO', 'CUERO', '1', '2015-06-02 22:56:40', '2015-06-02 22:56:40'), ('3', 'GRA', 'GRASO', 'GRASO', '1', '2015-06-02 22:56:58', '2015-06-02 22:56:58'), ('4', 'GRE', 'GREYSI', 'GREYSI', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('5', 'GUM', 'GUMI', 'GUMI', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('6', 'NOB', 'NOBU', 'NOBU', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00');
COMMIT;

-- ----------------------------
-- Table structure for mercaderias
-- ----------------------------
DROP TABLE IF EXISTS `mercaderias`;
CREATE TABLE `mercaderias` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`producto_id`  int(11) NOT NULL ,
`mercaderiacambio_id`  int(11) NOT NULL ,
`local_id`  int(11) NOT NULL ,
`estado`  varchar(3) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`preciocompra`  decimal(6,2) NOT NULL ,
`precioventa`  decimal(6,2) NOT NULL ,
`usuario_id`  int(11) NOT NULL ,
`created_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
`updated_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
PRIMARY KEY (`id`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci
/*!50003 AUTO_INCREMENT=11 */

;

-- ----------------------------
-- Records of mercaderias
-- ----------------------------
BEGIN;
INSERT INTO `mercaderias` VALUES ('1', '3', '0', '1', 'ACT', '60.00', '100.00', '3', '0000-00-00 00:00:00', '2015-06-11 20:52:42'), ('2', '3', '0', '1', 'ACT', '60.00', '100.00', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('3', '3', '0', '1', 'ACT', '60.00', '100.00', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('4', '3', '0', '1', 'ACT', '60.00', '100.00', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('5', '3', '0', '1', 'ACT', '60.00', '100.00', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('6', '10', '0', '1', 'ACT', '50.00', '90.00', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('7', '10', '0', '1', 'ACT', '50.00', '90.00', '3', '0000-00-00 00:00:00', '2015-06-11 21:30:54'), ('8', '10', '0', '1', 'ACT', '50.00', '90.00', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('9', '11', '0', '1', 'ACT', '50.00', '90.00', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('10', '11', '0', '1', 'ACT', '50.00', '90.00', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00');
COMMIT;

-- ----------------------------
-- Table structure for migrations
-- ----------------------------
DROP TABLE IF EXISTS `migrations`;
CREATE TABLE `migrations` (
`migration`  varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`batch`  int(11) NOT NULL 
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci

;

-- ----------------------------
-- Records of migrations
-- ----------------------------
BEGIN;
INSERT INTO `migrations` VALUES ('2015_05_30_212818_create_colors_table', '1'), ('2015_05_30_212857_create_locals_table', '1'), ('2015_05_30_212940_create_estados_table', '1'), ('2015_05_30_213020_create_marcas_table', '1'), ('2015_05_30_213109_create_tipos_table', '1'), ('2015_05_30_213201_create_modelos_table', '1'), ('2015_05_30_213241_create_materials_table', '1'), ('2015_05_30_213322_create_rangos_table', '1'), ('2015_05_30_213356_create_tallas_table', '1'), ('2015_05_30_213458_create_tipomovimientos_table', '1'), ('2015_05_30_213633_create_documentos_table', '1'), ('2015_05_30_213804_create_mercaderias_table', '1'), ('2015_05_30_214233_create_movimientos_table', '1'), ('2015_06_01_221928_create_users_table', '2');
COMMIT;

-- ----------------------------
-- Table structure for modelos
-- ----------------------------
DROP TABLE IF EXISTS `modelos`;
CREATE TABLE `modelos` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`codmodelo3`  varchar(3) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`codmodelo6`  varchar(6) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`desmodelo`  varchar(45) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`usuario_id`  int(11) NOT NULL ,
`created_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
`updated_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
PRIMARY KEY (`id`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci
/*!50003 AUTO_INCREMENT=153 */

;

-- ----------------------------
-- Records of modelos
-- ----------------------------
BEGIN;
INSERT INTO `modelos` VALUES ('1', '1', '1', '1', '1', '2015-05-31 16:06:28', '2015-05-31 16:06:28'), ('2', '2', '2', '2', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('3', '3', '3', '3', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('4', '4', '4', '4', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('5', '5', '5', '5', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('6', '6', '6', '6', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('7', '8', '8', '8', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('8', '10', '10', '10', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('9', '11', '11', '11', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('10', '12', '12', '12', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('11', '13', '13', '13', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('12', '14', '14', '14', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('13', '15', '15', '15', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('14', '16', '16', '16', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('15', '17', '17', '17', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('16', '18', '18', '18', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('17', '19', '19', '19', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('18', '20', '20', '20', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('19', '22', '22', '22', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('20', '23', '23', '23', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('21', '24', '24', '24', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('22', '25', '25', '25', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('23', '27', '27', '27', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('24', '28', '28', '28', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('25', '30', '30', '30', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('26', '31', '31', '31', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('27', '32', '32', '32', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('28', '33', '33', '33', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('29', '34', '34', '34', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('30', '35', '35', '35', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('31', '38', '38', '38', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('32', '40', '40', '40', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('33', '41', '41', '41', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('34', '42', '42', '42', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('35', '44', '44', '44', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('36', '46', '46', '46', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('37', '47', '47', '47', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('38', '48', '48', '48', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('39', '50', '50', '50', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('40', '50', '50', '50', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('41', '51', '51', '51', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('42', '52', '52', '52', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('43', '53', '53', '53', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('44', '54', '54', '54', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('45', '55', '55', '55', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('46', '56', '56', '56', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('47', '58', '58', '58', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('48', '59', '59', '59', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('49', '59', '59', '59', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('50', '60', '60', '60', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('51', '61', '61', '61', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('52', '62', '62', '62', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('53', '63', '63', '63', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('54', '64', '64', '64', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('55', '66', '66', '66', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('56', '67', '67', '67', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('57', '70', '70', '70', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('58', '72', '72', '72', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('59', '74', '74', '74', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('60', '76', '76', '76', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('61', '78', '78', '78', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('62', '80', '80', '80', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('63', '82', '82', '82', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('64', '83', '83', '83', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('65', '84', '84', '84', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('66', '85', '85', '85', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('67', '86', '86', '86', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('68', '88', '88', '88', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('69', '90', '90', '90', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('70', '91', '91', '91', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('71', '92', '92', '92', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('72', '94', '94', '94', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('73', '98', '98', '98', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('74', '100', '100', '100', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('75', '101', '101', '101', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('76', '104', '104', '104', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('77', '107', '107', '107', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('78', '112', '112', '112', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('79', '113', '113', '113', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('80', '115', '115', '115', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('81', '116', '116', '116', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('82', '118', '118', '118', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('83', '120', '120', '120', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('84', '121', '121', '121', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('85', '122', '122', '122', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('86', '123', '123', '123', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('87', '124', '124', '124', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('88', '125', '125', '125', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('89', '126', '126', '126', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('90', '127', '127', '127', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('91', '128', '128', '128', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('92', '130', '130', '130', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('93', '137', '137', '137', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('94', '141', '141', '141', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('95', '144', '144', '144', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('96', '145', '145', '145', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('97', '146', '146', '146', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('98', '147', '147', '147', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('99', '148', '148', '148', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('100', '149', '149', '149', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00');
INSERT INTO `modelos` VALUES ('101', '152', '152', '152', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('102', '157', '157', '157', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('103', '159', '159', '159', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('104', '160', '160', '160', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('105', '166', '166', '166', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('106', '170', '170', '170', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('107', '177', '177', '177', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('108', '198', '198', '198', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('109', '200', '200', '200', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('110', '210', '210', '210', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('111', '212', '212', '212', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('112', '216', '216', '216', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('113', '217', '217', '217', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('114', '218', '218', '218', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('115', '222', '222', '222', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('116', '223', '223', '223', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('117', '230', '230', '230', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('118', '238', '238', '238', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('119', '240', '240', '240', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('120', '241', '241', '241', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('121', '250', '250', '250', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('122', '270', '270', '270', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('123', '271', '271', '271', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('124', '272', '272', '272', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('125', '275', '275', '275', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('126', '300', '300', '300', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('127', '302', '302', '302', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('128', '304', '304', '304', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('129', '410', '410', '410', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('130', '450', '450', '450', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('131', '500', '500', '500', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('132', '502', '502', '502', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('133', '504', '504', '504', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('134', '506', '506', '506', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('135', '508', '508', '508', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('136', '800', '800', '800', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('137', '834', '834', '834', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('138', '970', '970', '970', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('139', '102', '1020', '1020', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('140', '102', '1026', '1026', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('141', '102', '1027', '1027', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('142', '134', '1341', '1341', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('143', '134', '1342', '1342', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('144', '134', '1343', '1343', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('145', '200', '2008', '2008', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('146', '205', '2050', '2050', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('147', '602', '6026', '6026', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('148', '602', '6027', '6027', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('149', '802', '8026', '8026', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('150', 'COR', 'CORAZO', 'CORAZON', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('151', 'NUE', 'NUEVA', 'NUEVA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('152', 'RAY', 'RAYA', 'RAYA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00');
COMMIT;

-- ----------------------------
-- Table structure for movimientos
-- ----------------------------
DROP TABLE IF EXISTS `movimientos`;
CREATE TABLE `movimientos` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`mercaderia_id`  int(11) NOT NULL ,
`documento_id`  int(11) NOT NULL ,
`flagoferta`  varchar(3) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`created_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
`updated_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
PRIMARY KEY (`id`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci
/*!50003 AUTO_INCREMENT=11 */

;

-- ----------------------------
-- Records of movimientos
-- ----------------------------
BEGIN;
INSERT INTO `movimientos` VALUES ('1', '1', '1', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('2', '2', '1', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('3', '3', '1', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('4', '4', '1', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('5', '5', '1', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('6', '6', '1', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('7', '7', '1', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('8', '8', '1', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('9', '9', '1', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('10', '10', '1', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00');
COMMIT;

-- ----------------------------
-- Table structure for productos
-- ----------------------------
DROP TABLE IF EXISTS `productos`;
CREATE TABLE `productos` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`provider_id`  int(11) NOT NULL ,
`marca_id`  int(11) NOT NULL ,
`tipo_id`  int(11) NOT NULL ,
`modelo_id`  int(11) NOT NULL ,
`material_id`  int(11) NOT NULL ,
`color_id`  int(11) NOT NULL ,
`rango_id`  int(11) NOT NULL ,
`talla_id`  int(11) NOT NULL ,
`desproducto`  varchar(45) CHARACTER SET utf8 COLLATE utf8_spanish_ci NULL DEFAULT NULL ,
`codproducto31`  char(45) CHARACTER SET utf8 COLLATE utf8_spanish_ci NOT NULL ,
`preciocompra`  decimal(6,2) NOT NULL ,
`precioventa`  decimal(6,2) NOT NULL ,
`usuario_id`  int(11) NOT NULL ,
`created_at`  timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP ,
`updated_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP ,
PRIMARY KEY (`id`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_spanish_ci
/*!50003 AUTO_INCREMENT=46 */

;

-- ----------------------------
-- Records of productos
-- ----------------------------
BEGIN;
INSERT INTO `productos` VALUES ('1', '3', '3', '27', '42', '2', '1', '2', '33', null, 'AVE-VESTIR-52-CUE-NEGRO-3-8-33', '0.00', '0.00', '1', '2015-06-10 20:50:38', '2015-06-10 20:50:38'), ('3', '3', '3', '27', '42', '2', '1', '2', '35', '', 'AVE-VESTIR-52-CUE-NEGRO-3-8-35', '0.00', '0.00', '1', '2015-06-10 20:50:38', '2015-06-10 20:50:38'), ('4', '3', '3', '27', '42', '2', '1', '2', '36', null, 'AVE-VESTIR-52-CUE-NEGRO-3-8-36', '0.00', '0.00', '1', '2015-06-10 20:50:39', '2015-06-10 20:50:39'), ('5', '3', '3', '27', '42', '2', '1', '2', '37', null, 'AVE-VESTIR-52-CUE-NEGRO-3-8-37', '0.00', '0.00', '1', '2015-06-10 20:50:39', '2015-06-10 20:50:39'), ('6', '3', '3', '27', '42', '2', '1', '2', '38', null, 'AVE-VESTIR-52-CUE-NEGRO-3-8-38', '0.00', '0.00', '1', '2015-06-10 20:50:39', '2015-06-10 20:50:39'), ('7', '2', '2', '13', '11', '2', '1', '2', '33', null, 'BOA-ESCNIÑO-13-CUE-NEGRO-3-8-33', '0.00', '0.00', '1', '2015-06-10 20:50:41', '2015-06-10 20:50:41'), ('8', '2', '2', '13', '11', '2', '1', '2', '34', '', 'BOA-ESCNIÑO-13-CUE-NEGRO-3-8-34', '0.00', '0.00', '1', '2015-06-10 20:50:41', '2015-06-10 20:50:41'), ('9', '2', '2', '13', '11', '2', '1', '2', '35', '', 'BOA-ESCNIÑO-13-CUE-NEGRO-3-8-35', '0.00', '0.00', '1', '2015-06-10 20:50:41', '2015-06-10 20:50:41'), ('10', '2', '2', '13', '11', '2', '1', '2', '36', '', 'BOA-ESCNIÑO-13-CUE-NEGRO-3-8-36', '0.00', '0.00', '1', '2015-06-10 20:50:42', '2015-06-10 20:50:42'), ('11', '2', '2', '13', '11', '2', '1', '2', '37', '', 'BOA-ESCNIÑO-13-CUE-NEGRO-3-8-37', '0.00', '0.00', '1', '2015-06-10 20:50:42', '2015-06-10 20:50:42'), ('12', '2', '2', '13', '11', '2', '1', '2', '38', '', 'BOA-ESCNIÑO-13-CUE-NEGRO-3-8-38', '0.00', '0.00', '1', '2015-06-10 20:50:42', '2015-06-10 20:50:42'), ('13', '1', '1', '23', '79', '2', '11', '3', '38', null, 'AND-SANDCHAL-113-CUE-AZUL-8-4-38', '0.00', '0.00', '1', '2015-06-10 20:50:44', '2015-06-10 20:50:44'), ('14', '1', '1', '23', '79', '2', '11', '3', '39', null, 'AND-SANDCHAL-113-CUE-AZUL-8-4-39', '0.00', '0.00', '1', '2015-06-10 20:50:44', '2015-06-10 20:50:44'), ('15', '1', '1', '23', '79', '2', '11', '3', '40', null, 'AND-SANDCHAL-113-CUE-AZUL-8-4-40', '0.00', '0.00', '1', '2015-06-10 20:50:44', '2015-06-10 20:50:44'), ('16', '1', '1', '23', '79', '2', '11', '3', '41', null, 'AND-SANDCHAL-113-CUE-AZUL-8-4-41', '0.00', '0.00', '1', '2015-06-10 20:50:44', '2015-06-10 20:50:44'), ('17', '1', '1', '23', '79', '2', '11', '3', '42', null, 'AND-SANDCHAL-113-CUE-AZUL-8-4-42', '0.00', '0.00', '1', '2015-06-10 20:50:45', '2015-06-10 20:50:45'), ('18', '1', '1', '23', '79', '2', '11', '3', '43', null, 'AND-SANDCHAL-113-CUE-AZUL-8-4-43', '0.00', '0.00', '1', '2015-06-10 20:50:45', '2015-06-10 20:50:45'), ('19', '1', '1', '23', '79', '2', '11', '3', '44', null, 'AND-SANDCHAL-113-CUE-AZUL-8-4-44', '0.00', '0.00', '1', '2015-06-10 20:50:45', '2015-06-10 20:50:45'), ('20', '9', '9', '12', '38', '2', '1', '1', '27', null, 'EMB-ESCHOMBR-48-CUE-NEGRO-7-2-27', '0.00', '0.00', '1', '2015-06-10 20:50:48', '2015-06-10 20:50:48'), ('21', '9', '9', '12', '38', '2', '1', '1', '28', null, 'EMB-ESCHOMBR-48-CUE-NEGRO-7-2-28', '0.00', '0.00', '1', '2015-06-10 20:50:48', '2015-06-10 20:50:48'), ('22', '9', '9', '12', '38', '2', '1', '1', '29', null, 'EMB-ESCHOMBR-48-CUE-NEGRO-7-2-29', '0.00', '0.00', '1', '2015-06-10 20:50:48', '2015-06-10 20:50:48'), ('23', '9', '9', '12', '38', '2', '1', '1', '30', null, 'EMB-ESCHOMBR-48-CUE-NEGRO-7-2-30', '0.00', '0.00', '1', '2015-06-10 20:50:49', '2015-06-10 20:50:49'), ('24', '9', '9', '12', '38', '2', '1', '1', '31', null, 'EMB-ESCHOMBR-48-CUE-NEGRO-7-2-31', '0.00', '0.00', '1', '2015-06-10 20:50:54', '2015-06-10 20:50:54'), ('25', '9', '9', '12', '38', '2', '1', '1', '32', null, 'EMB-ESCHOMBR-48-CUE-NEGRO-7-2-32', '0.00', '0.00', '1', '2015-06-10 20:50:54', '2015-06-10 20:50:54'), ('32', '7', '7', '4', '109', '5', '12', '2', '33', null, 'DRA-BOTINESC-200-GUM-BLANCO-3-8-33', '0.00', '0.00', '0', '2015-06-10 20:50:56', '2015-06-10 20:50:56'), ('34', '7', '7', '4', '109', '5', '12', '2', '35', null, 'DRA-BOTINESC-200-GUM-BLANCO-3-8-35', '0.00', '0.00', '0', '2015-06-10 20:50:56', '2015-06-10 20:50:56'), ('35', '7', '7', '4', '109', '5', '12', '2', '36', null, 'DRA-BOTINESC-200-GUM-BLANCO-3-8-36', '0.00', '0.00', '0', '2015-06-10 20:50:56', '2015-06-10 20:50:56'), ('36', '7', '7', '4', '109', '5', '12', '2', '37', null, 'DRA-BOTINESC-200-GUM-BLANCO-3-8-37', '0.00', '0.00', '0', '2015-06-10 20:50:56', '2015-06-10 20:50:56'), ('37', '7', '7', '4', '109', '5', '12', '2', '38', null, 'DRA-BOTINESC-200-GUM-BLANCO-3-8-38', '0.00', '0.00', '0', '2015-06-10 20:50:57', '2015-06-10 20:50:57'), ('45', '7', '7', '4', '109', '5', '12', '2', '34', null, 'DRA-BOTINESC-200-GUM-BLANCO-3-8-34', '0.00', '0.00', '0', '2015-06-10 20:50:58', '2015-06-10 20:50:58');
COMMIT;

-- ----------------------------
-- Table structure for providers
-- ----------------------------
DROP TABLE IF EXISTS `providers`;
CREATE TABLE `providers` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`codprovider3`  varchar(3) CHARACTER SET utf8 COLLATE utf8_spanish_ci NOT NULL ,
`codprovider6`  varchar(6) CHARACTER SET utf8 COLLATE utf8_spanish_ci NOT NULL ,
`desprovider`  varchar(45) CHARACTER SET utf8 COLLATE utf8_spanish_ci NOT NULL ,
`usuario_id`  int(11) NOT NULL ,
`created_at`  timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP ,
`updated_at`  timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP ,
PRIMARY KEY (`id`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_spanish_ci
/*!50003 AUTO_INCREMENT=12 */

;

-- ----------------------------
-- Records of providers
-- ----------------------------
BEGIN;
INSERT INTO `providers` VALUES ('1', 'AND', 'ANDERS', 'ANDERSON', '1', null, null), ('2', 'BOA', 'BOAZ', 'BOAZ', '1', null, null), ('3', 'AVE', 'AVENTU', 'AVENTURERO', '1', '2015-06-06 00:54:01', '2015-06-06 00:54:01'), ('4', 'BRA', 'BRASIL', 'BRASILIA', '1', '2015-06-06 00:54:01', '2015-06-06 00:54:01'), ('5', 'CZB', 'CALZ-B', 'CALZADO B', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('6', 'DAM', 'DAMBER', 'DAMBER', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('7', 'DRA', 'DRAGON', 'DRAGON', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('8', 'EB', 'EB', 'EB', '1', '2015-06-06 00:57:07', '2015-06-06 00:57:07'), ('9', 'EMB', 'EMBAJA', 'EMBAJADOR', '1', '2015-06-06 00:57:07', '2015-06-06 00:57:07'), ('10', 'KEN', 'KENSA', 'KENSA', '1', '2015-06-06 00:57:07', '2015-06-06 00:57:07'), ('11', 'PRI', 'PRINCE', 'PRINCE', '1', '2015-06-06 00:57:07', '2015-06-06 00:57:07');
COMMIT;

-- ----------------------------
-- Table structure for rangos
-- ----------------------------
DROP TABLE IF EXISTS `rangos`;
CREATE TABLE `rangos` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`codrango3`  varchar(3) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`codrango6`  varchar(6) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`desrango`  varchar(45) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`usuario_id`  int(11) NOT NULL ,
`created_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
`updated_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
PRIMARY KEY (`id`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci
/*!50003 AUTO_INCREMENT=4 */

;

-- ----------------------------
-- Records of rangos
-- ----------------------------
BEGIN;
INSERT INTO `rangos` VALUES ('1', '7-2', '27-32', '27-32', '1', '2015-05-31 17:13:59', '2015-05-31 17:13:59'), ('2', '3-8', '33-38', '33-38', '1', '2015-05-31 17:14:23', '2015-05-31 17:14:23'), ('3', '8-4', '38-44', '38-44', '1', '2015-06-01 01:06:43', '2015-06-01 01:06:43');
COMMIT;

-- ----------------------------
-- Table structure for tallas
-- ----------------------------
DROP TABLE IF EXISTS `tallas`;
CREATE TABLE `tallas` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`codtalla3`  varchar(3) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`codtalla6`  varchar(6) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`destalla`  varchar(45) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`usuario_id`  int(11) NOT NULL ,
`rango_id`  int(11) NOT NULL ,
`created_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
`updated_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
PRIMARY KEY (`id`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci
/*!50003 AUTO_INCREMENT=20 */

;

-- ----------------------------
-- Records of tallas
-- ----------------------------
BEGIN;
INSERT INTO `tallas` VALUES ('1', '27', '27', '27', '1', '1', '2015-05-31 17:14:45', '2015-05-31 21:09:40'), ('2', '28', '28', '28', '1', '1', '2015-05-31 17:14:57', '2015-05-31 17:14:57'), ('3', '29', '29', '29', '1', '1', '2015-05-31 17:15:17', '2015-05-31 17:15:17'), ('4', '30', '30', '30', '1', '1', '2015-05-31 17:15:34', '2015-05-31 17:15:34'), ('5', '31', '31', '31', '1', '1', '2015-05-31 17:15:45', '2015-05-31 17:15:45'), ('6', '32', '32', '32', '1', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('7', '33', '33', '33', '1', '2', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('8', '34', '34', '34', '1', '2', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('9', '35', '35', '35', '1', '2', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('10', '36', '36', '36', '1', '2', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('11', '37', '37', '37', '1', '2', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('12', '38', '38', '38', '1', '2', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('13', '38', '38', '38', '1', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('14', '39', '39', '39', '1', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('15', '40', '40', '40', '1', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('16', '41', '41', '41', '1', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('17', '42', '42', '42', '1', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('18', '43', '43', '43', '1', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('19', '44', '44', '44', '1', '3', '0000-00-00 00:00:00', '0000-00-00 00:00:00');
COMMIT;

-- ----------------------------
-- Table structure for tipomovimientos
-- ----------------------------
DROP TABLE IF EXISTS `tipomovimientos`;
CREATE TABLE `tipomovimientos` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`codtipomovimiento3`  varchar(3) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`codtipomovimiento6`  varchar(6) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`destipomovimiento`  varchar(45) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`usuario_id`  int(11) NOT NULL ,
`created_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
`updated_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
PRIMARY KEY (`id`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci
/*!50003 AUTO_INCREMENT=8 */

;

-- ----------------------------
-- Records of tipomovimientos
-- ----------------------------
BEGIN;
INSERT INTO `tipomovimientos` VALUES ('1', 'in', 'in', 'ingreso prov- almacen', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('2', 'sa', 'sa', 'salida almacen - pto', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('3', 've', 've', 'venta pto - cliente', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('4', 'ca', 'ca', 'cambio cliente - punto', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('5', 're', 're', 'reingreso pto- almacen', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('6', 'de', 'de', 'devolucion pto/almacen - almacen', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('7', 'ba', 'ba', 'baja almacen - prov', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00');
COMMIT;

-- ----------------------------
-- Table structure for tipos
-- ----------------------------
DROP TABLE IF EXISTS `tipos`;
CREATE TABLE `tipos` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`codtipo3`  varchar(3) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`codtipo8`  varchar(8) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`destipo`  varchar(45) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`usuario_id`  int(11) NOT NULL ,
`created_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
`updated_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
PRIMARY KEY (`id`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci
/*!50003 AUTO_INCREMENT=28 */

;

-- ----------------------------
-- Records of tipos
-- ----------------------------
BEGIN;
INSERT INTO `tipos` VALUES ('1', 'BAL', 'BALE', 'BALE', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('2', 'BOT', 'BOTA', 'BOTA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('3', 'BOT', 'BOTIN', 'BOTIN', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('4', 'BES', 'BOTINESC', 'BOTIN ESCOLAR', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('5', 'BMI', 'BOTINMIL', 'BOTIN MILITAR', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('6', 'BPC', 'BOTPLCAU', 'BOTIN PLANTA CAUCHO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('7', 'BOT', 'BOTINTEX', 'BOTIN TEXANO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('8', 'BOT', 'BOTINVES', 'BOTIN VESTIR', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('9', 'CAM', 'CAMPER', 'CAMPER', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('10', 'DEM', 'DEMOCRAT', 'DEMOCRATICO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('11', 'ESC', 'ESCODAMA', 'ESCOLAR DAMA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('12', 'ESC', 'ESCHOMBR', 'ESCOLAR HOMBRE', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('13', 'ESC', 'ESCNIÑO', 'ESCOLAR NIÑO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('14', 'F20', 'F20', 'F20', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('15', 'GRA', 'GRAF', 'GRAF', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('16', 'HUE', 'HUELLA', 'HUELLA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('17', 'KEN', 'KENNEDY', 'KENNEDY', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('18', 'MOC', 'MOCASIN', 'MOCASIN', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('19', 'NOR', 'NORMAL', 'NORMAL', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('20', 'PAL', 'PALA', 'PALA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('21', 'PLA', 'PLANTCAU', 'PLANTA CAUCHO', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('22', 'PLA', 'PLANTSUE', 'PLANTA SUELA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('23', 'SAN', 'SANDCHAL', 'SANDALIA CHALA', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('24', 'SPO', 'SPORTMOC', 'SPORT MOCASIN', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('25', 'SPO', 'SPORTSID', 'SPORT TOP SIDER', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('26', 'TOP', 'TOPEROL', 'TOPEROL', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00'), ('27', 'VES', 'VESTIR', 'VESTIR', '1', '0000-00-00 00:00:00', '0000-00-00 00:00:00');
COMMIT;

-- ----------------------------
-- Table structure for users
-- ----------------------------
DROP TABLE IF EXISTS `users`;
CREATE TABLE `users` (
`id`  int(11) UNSIGNED NOT NULL AUTO_INCREMENT ,
`username`  varchar(6) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`desusuario`  varchar(45) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`rolusuario`  varchar(6) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`password`  varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL ,
`usuario_id`  int(11) NOT NULL ,
`remember_token`  varchar(100) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL ,
`created_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
`updated_at`  timestamp NOT NULL DEFAULT '0000-00-00 00:00:00' ,
PRIMARY KEY (`id`),
UNIQUE INDEX `users_username_unique` USING BTREE (`username`)
)
ENGINE=InnoDB
DEFAULT CHARACTER SET=utf8 COLLATE=utf8_unicode_ci
/*!50003 AUTO_INCREMENT=15 */

;

-- ----------------------------
-- Records of users
-- ----------------------------
BEGIN;
INSERT INTO `users` VALUES ('1', 'MARIO', 'MARIO BORJA', 'SUPER', '$2y$10$v5tjhujPQPEARx.9lGAdyOZkEqjc/xYssPPr3gG7jE6mM6e.lYGcu', '1', 'xms2D9a6zPCZNULfbJvnCbo8TLYfXCFY6mIGkWVC9S1JzsptuPXjcs6I4IW8', '0000-00-00 00:00:00', '2015-06-16 16:20:47'), ('2', 'ADMIN1', 'NOMBRE ADMINISTRADOR1', 'ADMIN', '$2y$10$dihXxahbQs8KYga.5afoguOtmRDNqJZw12XvUc3SMCn.oAwN8HFLG', '1', null, '0000-00-00 00:00:00', '2015-06-15 22:28:37'), ('3', 'ADMIN2', 'ADMINIST DOS', 'ADMIN', '$2y$10$Hz0X52u9isgmyTNEzhvbCe9lTxmAkTHP0in8ts0Va59N4jAF7RcOi', '1', null, '0000-00-00 00:00:00', '2015-06-15 22:28:46'), ('4', 'ALMAC', 'NOMBRE ALMACENERO', 'ALMAC', '$2y$10$/Dr8TdfgYVzGbiYwizUWOesbj71EFILqyQDZuRPf/tI1ian7ZnF/6', '1', null, '0000-00-00 00:00:00', '2015-06-15 22:28:58'), ('5', 'VENDE1', 'NOMBRE VENDE1', 'VENDE', '$2y$10$9RCGX6kNeDI6q4zjzlUSD.WvyZ3U9tToQ7vTMtlOKmZDWEid27No6', '1', null, '0000-00-00 00:00:00', '2015-06-15 22:29:07'), ('6', 'VENDE2', 'NOMBRE VENDE DOS', 'VENDE', '$2y$10$GW3ECOk8Gtfx/ausOPbwWOy33HtIQh0twGJ543OtQuhID7QSeQh.q', '1', null, '0000-00-00 00:00:00', '2015-06-15 22:29:17'), ('7', 'VENDE3', 'NOMBRE VEMDE3', 'VENDE', '$2y$10$A9uBrL8BwrpPX7jOWdHIzeHF3t2aMtdB7rnW.h6FQ5kqM9jBZpb3u', '1', null, '0000-00-00 00:00:00', '2015-06-15 22:29:25'), ('14', 'ADMIN3', 'NOMBRE ADMINISTRADOR3', 'ADMIN', '$2y$10$Z1KDDYig3P701Hx0AvEMCOIK5pdjRknlWF4WPCJJqsD4S2SnJNtLC', '1', null, '2015-06-04 21:13:31', '2015-06-15 22:29:55');
COMMIT;

-- ----------------------------
-- Procedure structure for AddDocumentos
-- ----------------------------
DROP PROCEDURE IF EXISTS `AddDocumentos`;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `AddDocumentos`( 		
        tipomovimiento_id   int,
		localini_id         int,
		localfin_id         int,
		flagestado          char(3),

		usuario_id          int,
 out    er_text             char(25),
 out    documento_id        int)
BEGIN

/*
Procedimiento para el ingreso de los documentos ( archivo maestro de los movimientos )
declare full_error char(50);
*/

declare exit handler for sqlexception
begin
	rollback;
    set er_text = 'error en sp_adddocumentos';
end;

start transaction;

		INSERT INTO `souko`.`documentos`
		(`fechadocumento`,
		`tipomovimiento_id`,
		`localini_id`,
		`localfin_id`,
		`flagestado`,
		`usuario_id`)
		VALUES
		(curdate(),
		tipomovimiento_id,
		localini_id,
		localfin_id,
		flagestado,
		usuario_id);
      
commit;
 SET documento_id = LAST_INSERT_ID();
 set er_text = 'ok';

END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for AddMercaderias
-- ----------------------------
DROP PROCEDURE IF EXISTS `AddMercaderias`;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `AddMercaderias`(
		producto_id  			int, 
		local_id 				int, 
		preciocompra 			decimal(6,2),
		precioventa 			decimal(6,2),
		usuario_id 				int,
 out    er_text                 char(25))
BEGIN

/*
ingresa items en la tabla mercaderias

*/
declare mercaderiacambio_id INT;
declare estado char(3);

declare exit handler for sqlexception
begin
	rollback;
    set er_text = 'error en sp_addmercaderias';
end;


start transaction;

	set mercaderiacambio_id = 0;
    set estado = 'ACT';
    
	INSERT INTO `souko`.`mercaderias`
	(`producto_id`,
	`mercaderiacambio_id`,
	`local_id`,
	`estado`,
	`preciocompra`,
	`precioventa`,
	`usuario_id`)
	VALUES
	(producto_id,
	 mercaderiacambio_id,
	 local_id,
	 estado,
	 preciocompra,
	 precioventa,
	 usuario_id);

commit;

 set er_text = 'ok';
 
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for AddMovimientos
-- ----------------------------
DROP PROCEDURE IF EXISTS `AddMovimientos`;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `AddMovimientos`(
		 mercaderia_id   int, 
         documento_id    int,
 out    er_text             char(25))
BEGIN

declare flagoferta  char(3);

declare exit handler for sqlexception
begin
	rollback;
    set er_text = 'error en sp_addmovimientos';
end;

start transaction;

	set flagoferta = '000';

		-- ingreso y registro demovimientos
		INSERT INTO `souko`.`movimientos`
		(`mercaderia_id`,`documento_id`,`flagoferta`)
		values
		(mercaderia_id,documento_id, flagoferta );

 commit; 
 set er_text = 'ok';
 
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for IngresoMercaderiaProveedor
-- ----------------------------
DROP PROCEDURE IF EXISTS `IngresoMercaderiaProveedor`;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `IngresoMercaderiaProveedor`(
		documento_id            int,
		producto_id  			int,  
		local_id 				int, 
		preciocompra 			decimal(6,2),
		precioventa 			decimal(6,2),
		usuario_id 				int,
        cant                    int,
 out    er_text                 char(25))
BEGIN
/*´
se usa para el ingreso de mercaderias al almacen, desde el proveedor.
usa un loop de acuerdo a la cantida ingresada
1. registrar en la tabla mercadería.
2. registra el movimiento de ingreso del producto para su trazabilidad
*/
declare cont int default 1;
declare mercaderia_id int;

declare exit handler for sqlexception
begin
	rollback;
    set er_text = 'error en IngresoMercaderiaProveedor';
end;

start transaction;

   WHILE cont  <= cant DO
		-- llamar al procedimiento de mercadería
		CALL `AddMercaderias`
        (producto_id,   
		 local_id, 
		 preciocompra,
		 precioventa,
		 usuario_id,
         er_text);
		SET mercaderia_id = LAST_INSERT_ID();
       
		CALL `AddMovimientos`(mercaderia_id, documento_id,er_text);

		SET  cont = cont + 1; 
   END WHILE;
   
commit;
 set er_text = 'ok';
 
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for SalidaMercaderiaPto
-- ----------------------------
DROP PROCEDURE IF EXISTS `SalidaMercaderiaPto`;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `SalidaMercaderiaPto`(
		documento_id            int,
		mercaderia_id  			int,  
		usuario_id 				int,
 out    er_text                 char(25))
BEGIN

/*´
se usa para el movimiento de mercaderias entre los locales.

1. registra el movimiento de ingreso del producto para su trazabilidad
2. carga los datos de documentos en las variables
2. actualiza el estado en la tabla mercadería.
*/

declare locini_id int;
declare locfin_id int;

declare exit handler for sqlexception
begin
	rollback;
    set er_text = 'Error SalidaMercaderiaPto';
end;


	select `localfin_id` , `localini_id` into locfin_id, locini_id
    from `souko`.`documentos`
    where `id`  = documento_id;


start transaction;
 	
	UPDATE `souko`.`mercaderias`
	SET `local_id` = locfin_id  
	WHERE `id` = mercaderia_id;

	CALL `AddMovimientos`(mercaderia_id, documento_id, er_text);


commit;
 set er_text = 'ok';
 
END
;;
DELIMITER ;

-- ----------------------------
-- Procedure structure for VentaMercaderia
-- ----------------------------
DROP PROCEDURE IF EXISTS `VentaMercaderia`;
DELIMITER ;;
CREATE DEFINER=`root`@`localhost` PROCEDURE `VentaMercaderia`(
		documento_id            int,
		mercaderia_id  			int,  
        _precioventa             decimal(6,2),
		usuario_id 				int,
 out    er_text                 char(25))
BEGIN

/*´
se usa para el movimiento de mercaderias entre los locales.

1. carga los datos de documentos en las variables
2. actualiza mercaderias estado y precioventa
2. adiciona registro de movimiento de asociado a documento.
*/

declare locini_id int;
declare locfin_id int;

declare exit handler for sqlexception
begin
	rollback;
    set er_text = 'Error VentaMercaderia';
end;

	select `localfin_id` , `localini_id` into locfin_id, locini_id
    from `souko`.`documentos`
    where `id`  = documento_id;

start transaction;
 	
	UPDATE `souko`.`mercaderias`
	SET `estado` = 'VEN',
         `precioventa` = _precioventa,
         `local_id` = locfin_id
	WHERE `id` = mercaderia_id;

	CALL `AddMovimientos`(mercaderia_id, documento_id, er_text);


commit;
 set er_text = 'ok';
 end
;;
DELIMITER ;

-- ----------------------------
-- Auto increment value for colors
-- ----------------------------
ALTER TABLE `colors` AUTO_INCREMENT=37;

-- ----------------------------
-- Auto increment value for documentos
-- ----------------------------
ALTER TABLE `documentos` AUTO_INCREMENT=2;

-- ----------------------------
-- Auto increment value for estados
-- ----------------------------
ALTER TABLE `estados` AUTO_INCREMENT=5;

-- ----------------------------
-- Auto increment value for locals
-- ----------------------------
ALTER TABLE `locals` AUTO_INCREMENT=3;

-- ----------------------------
-- Auto increment value for marcas
-- ----------------------------
ALTER TABLE `marcas` AUTO_INCREMENT=12;

-- ----------------------------
-- Auto increment value for materials
-- ----------------------------
ALTER TABLE `materials` AUTO_INCREMENT=7;

-- ----------------------------
-- Auto increment value for mercaderias
-- ----------------------------
ALTER TABLE `mercaderias` AUTO_INCREMENT=11;

-- ----------------------------
-- Auto increment value for modelos
-- ----------------------------
ALTER TABLE `modelos` AUTO_INCREMENT=153;

-- ----------------------------
-- Auto increment value for movimientos
-- ----------------------------
ALTER TABLE `movimientos` AUTO_INCREMENT=11;

-- ----------------------------
-- Auto increment value for productos
-- ----------------------------
ALTER TABLE `productos` AUTO_INCREMENT=46;

-- ----------------------------
-- Auto increment value for providers
-- ----------------------------
ALTER TABLE `providers` AUTO_INCREMENT=12;

-- ----------------------------
-- Auto increment value for rangos
-- ----------------------------
ALTER TABLE `rangos` AUTO_INCREMENT=4;

-- ----------------------------
-- Auto increment value for tallas
-- ----------------------------
ALTER TABLE `tallas` AUTO_INCREMENT=20;

-- ----------------------------
-- Auto increment value for tipomovimientos
-- ----------------------------
ALTER TABLE `tipomovimientos` AUTO_INCREMENT=8;

-- ----------------------------
-- Auto increment value for tipos
-- ----------------------------
ALTER TABLE `tipos` AUTO_INCREMENT=28;

-- ----------------------------
-- Auto increment value for users
-- ----------------------------
ALTER TABLE `users` AUTO_INCREMENT=15;
